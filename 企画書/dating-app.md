# dating-app

社内の「社長の奢り自販機」を有効活用するためのマッチングアプリケーション

## 背景・課題

会社の福利厚生として自由に使える社内自販機があるが、以下のルールがあるため利用機会を逃しがちである：

- 1人につき1日1回まで無料で購入できる
- 社員証を2人でかざすことで自販機から飲み物が出る（＝ペアが必要）
- 同じ週に同じ人とペアを組んでの利用はできない

その結果、誰とペアを組んだか忘れてしまい利用を逃す、あるいはペア相手が見つからず利用できない日が発生してしまう。

## 解決策（概要）

毎日の利用記録と簡単なマッチング機能を提供することで、以下を実現する：

- その週に誰とペアを組んだかを記録・参照できる
- 当日まだ利用していない人同士を優先的に候補提示してペアが見つかりやすくする
- 週ルール（同一週に同じ相手とペア不可）を自動的に判定して候補から除外する
- リマインダー通知で忘れを防止する

## 主要機能（MVP）

- ユーザー登録（社員情報）
- 日次利用記録（誰とペアを組んだかの記録）
- マッチング（未実施者を優先した候補提示）
- 週ルールの自動チェック（同じ週の重複禁止）
- ペア履歴の一覧表示（週別、月別で参照可能）

## UI/UX（案）

- ホーム画面：今日のステータス（未実施/実施済）と候補一覧
- ペア申請画面：相手を選んで申請／承認フロー（※社内運用に合わせて簡易化可）
- 履歴画面：週ごとの利用履歴と検索
- 設定：通知・アカウント管理

## 技術スタック（指定に基づく）

- SP（モバイル）
  - 開発言語: React Native
  - E2E: Maestro（モバイル自動操作）
  - 単体テスト（未決定）→ 推奨: Jest + React Native Testing Library

- WEB FE
  - 開発言語: Vue
  - E2E・単体テスト: Vitest（Unit/E2E 観点）

- BE
  - Java Lambda（AWS Lambda with Java）

- DB / インフラ
  - 基本方針: AWS 上で最小構成かつコストを抑える
  - 推奨構成（低コスト優先）:
    - データストア: DynamoDB（オンデマンド課金で運用コスト最小化）
    - API: API Gateway + Lambda
    - 認証: Amazon Cognito（社内向けはSAML/SSO連携も検討）
    - 静的資産: S3 + CloudFront
    - ログ/監視: CloudWatch

  - もし複雑なクエリやRDBが必要なら Aurora Serverless も検討（ただしコスト増）

## データ設計（簡易）

- Users
  - id (PK)
  - name
  - employeeId
  - department
  - lastActive

- PairRecord
  - id (PK)
  - date (yyyy-mm-dd)
  - weekNumber
  - userA_id
  - userB_id
  - createdAt

- DailyStatus （任意、クエリ高速化用）
  - user_id
  - date
  - status (not_done / done)

※ DynamoDB を想定したシンプルなキー設計にして、週集計や検索は必要に応じて GSI を追加

## コスト最適化のポイント

- DynamoDB のオンデマンド課金を使い、最小限の運用で始める
- Lambda + API Gateway はコールドスタートはあるが低トラフィック環境では安価
- テスト環境や開発環境は不要時に停止、S3やCloudFrontは静的配信でコスト削減
- 監視は必要最小限のログに留める（詳細ログはオプトイン）

## テスト戦略

- 単体: ビジネスロジックを重点的に Unit テスト
- E2E (モバイル): Maestro を使った端末上での操作テスト
- E2E (Web): Vitest を用いたコンポーネント/統合テスト

## MVP リリース案（スケジュール）

- Week 0: 仕様確定・プロトタイプ設計（1週間）
- Week 1–2: BE 基本 API 実装 + DB モデル構築（2週間）
- Week 3–4: Web フロント（Vue）で管理画面＋マッチングUI（2週間）
- Week 5–6: Mobile（React Native）最低限操作フロー実装 + E2E（2週間）
- その後: 本番デプロイ、運用テスト、ユーザーフィードバック反映

※ チーム規模や稼働率により短縮／延長可能

## 次のアクション（提案）

1. 要件の優先順位付け（MVP 機能を確定）
2. 迅速なプロトタイプ（Web 版 or Mobile 版どちらかで検証）
3. 最低限の Infra 設計（認証・DB・API の構成）
4. 3週間スプリントでの PoC 実装

---

作りたい方向性や優先するプラットフォーム（まずは Web で検証するか、Mobile で検証するか）を教えてもらえたら、さらに詳細なタスク分解と見積もり作るよ〜✨
